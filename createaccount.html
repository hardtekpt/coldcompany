<!doctype html>
<html lang="en">
<head>

<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>Cold company</title>

<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.3/angular.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.3.3/angular-route.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>
<script src="script.js"></script>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

</head>


<body>

 <div class="container-fullwidth">
	<div class="row">
		<div class="col-md-12">
			<div class="row">
				<div class="col-md-12">
					<nav class="navbar navbar-inverse navbar-static-top my-navbar" role="navigation">
						<div class="navbar-header">

							<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
								 <span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span>
							</button> <a class="navbar-brand" href="index.html">Cold company</a>
						</div>

						<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
							<ul class="nav navbar-nav">
								<li>
									<a href="index.html">Home</a>
								</li>
								<li>
									<a href="product.html">Product</a>
								</li>
								<li class="dropdown">
									 <a href="#" class="dropdown-toggle" data-toggle="dropdown">About<strong class="caret"></strong></a>
									<ul class="dropdown-menu">
										<li>
											<a href="team.html">Team</a>
										</li>
										<li>
											<a href="#">Info</a>
										</li>
										<li class="divider">
										</li>
										<li>
											<a href="contact.html">Contact</a>
										</li>
									</ul>
								</li>
							</ul>

							<ul class="nav navbar-nav navbar-right">
								<li>
									<a href="#" data-toggle="modal" data-target="#exampleModal" data-whatever="@mdo">Login
									<span class="glyphicon glyphicon-user" aria-hidden="true" style="padding-right: 10px;"></span>
									</a>
                				</li>
							</ul>
						</div>

					</nav>
				</div>
			</div>
			
	
	<div class="row">
		<div class="col-md-12">
			<form class="form-horizontal" role="form" id="ismForm">
                <div class="form-group">
					<label for="inputEmail3" class="col-sm-2 control-label">
						Name
					</label>
					<div class="col-sm-10">
						<input type="text" class="form-control" id="name" />
					</div>
				</div>
                <div class="form-group">
					<label for="inputEmail3" class="col-sm-2 control-label">
						Surname
					</label>
					<div class="col-sm-10">
						<input type="text" class="form-control" id="surname" />
					</div>
				</div>
            	<div class="form-group">
					<label for="inputEmail3" class="col-sm-2 control-label">
						Email
					</label>
					<div class="col-sm-10">
						<input type="text" class="form-control" id="email" />
					</div>
				</div>
				<div class="form-group">
					<label for="inputEmail3" class="col-sm-2 control-label">
						Username
					</label>
					<div class="col-sm-10">
						<input type="text" class="form-control" id="username" />
					</div>
				</div>
				<div class="form-group">
					 
					<label for="inputPassword3" class="col-sm-2 control-label">
						Password
					</label>
					<div class="col-sm-10">
						<input type="password" class="form-control" id="password" />
					</div>
				</div>
								<div class="form-group">
					 
					<label for="inputPassword3" class="col-sm-2 control-label">
						Confirm password
					</label>
					<div class="col-sm-10">
						<input type="password" class="form-control" id="password1" />
					</div>
				</div>
				<div class="form-group">
					<div class="col-sm-offset-2 col-sm-10">					 
						<button type="button" class="btn btn-success" onclick="enviar()">
							Create account
						</button>	
						<a href="#" class="btn btn-basic" role="button" data-toggle="modal" data-target="#exampleModal" data-whatever="@mdo">Login</a>				
					</div>
				</div>
			</form>
		</div>
	</div>
</div>
	</div>
 </div>
		<div class="container-fullwidth">
		<div class="row">
			<div class="col-md-12">
				<nav class="navbar-fixed-bottom">
				<footer class="footer" style="border: 0px; border-radius: 0px; background: rgb(34,34,34);">
						<div class="container-fluid">
							<div class="row">
								<div class="col-md-6">
									<text style="color: rgba(255,255,255,0.8); padding-top: 9px; padding-bottom: 0px;">
										<p></p><strong>Cold company, Inc.</strong><br> Estrada da fazarga, moita redonda<br> Santarém, Portugal<br> <abbr >P:</abbr> 914304760
									</text>
								</div>
								<div class="col-md-6" align="right">
									<!-- imagens -->
									<text style="color: rgba(255,255,255,0.8); padding-top: 9px; padding-bottom: 0px;">
										<p></p><strong>Social networks</strong>
										<p><p>
										<i class="fa fa-facebook-square fa-lg"></i>&nbsp;&nbsp;
										<i class="fa fa-youtube-square fa-lg"></i>&nbsp;&nbsp;
										<i class="fa fa-instagram fa-lg"></i>&nbsp;&nbsp;
										<i class="fa fa-twitter-square fa-lg"></i>&nbsp;&nbsp;
										<i class="fa fa-rss-square fa-lg"></i>&nbsp;&nbsp;
										<i class="fa fa-pinterest-square fa-lg"></i>
										</p></p>
									</text>
								</div>
							</div>
						<p><hr style="padding:0px; margin:0px;"></p>
							<div class="row">
								<div class="col-md-6">
									<font size="1.5" style="color: rgba(255,255,255,0.6); padding-top: 9px; padding-bottom: 0px;">
										<img src="images/pt.png" class="img-responsive" alt="portugal" style="display: inline-block;" >&nbsp;<strong style="color: rgba(255,255,255,0.8);">Portugal</strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; © 2017 ColdCompany, INC all rights reserved   
									</font>
									<p> </p>
								</div>
								<div class="col-md-6>" align="right">
									<font size="1.5" style="color: rgba(255,255,255,0.6); padding-top: 9px; padding-bottom: 0px;">
										Guides  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  Use terms  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  Company details  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  Cookies and privacy politics &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Cookies settings &nbsp;&nbsp;&nbsp;&nbsp;
									</font>
									<p> </p>
								</div>
							</div>
						</div>
				</footer>
				</nav>
			</div>
		</div>
		</div>
<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Login</h5>
      </div>
      <div class="modal-body">
        <form>
          <div class="form-group">
            <label for="recipient-name" class="form-control-label">Username:</label>
            <input type="text" class="form-control" id="username1" />
          </div>
          <div class="form-group">
            <label for="message-text" class="form-control-label">Password:</label>
            <input type="password" class="form-control" id="password11" />
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
		<button type="submit" class="btn btn-primary" onclick="entrar()">
			Sign in
		</button>
      </div>
    </div>
  </div>
</div>


<script src="/socket.io/socket.io.js"></script>
<script src="https://code.jquery.com/jquery-1.11.1.js"></script>
<script>
	function submitForm() { // submits form
    document.getElementById("ismForm").submit();
}
	var socket = io.connect();
	var submission;
		function entrar(){
		submission = {
            username: document.getElementById("username1").value,
            password: document.getElementById("password11").value
		}
		if(submission.username != "" && submission.password != ""){
			socket.emit('entrar2', submission);
		}
		else{
			alert("Please fill out all the fields!");
		}
		logar();

	}
	function logar(){
		socket.on('login', function(data){
			if(data == "ok"){
				window.location.replace("/dashboard.html");
			}
			else if(data == "nok"){
				alert("Error\nWrong user or password");
			}
		});
	}

	var userOk = "nok";
	var emailOk = "nok";
	var submission;
		function enviar(){
		submission = {
			name: document.getElementById("name").value,
			surname: document.getElementById("surname").value,
			email: document.getElementById("email").value,
            username: document.getElementById("username").value,
            password: document.getElementById("password").value,
			password1: document.getElementById("password1").value
		}
		if(submission.name != "" && submission.surname != "" && submission.email != "" && submission.username != "" && submission.password != "" && submission.password1 != ""){
			socket.emit('enviar', submission);
		}
		else{
			alert("Please fill out all the fields!");
		}
		socket.on('userOk',function(data){
        	if(data == "ok"){
				userOk = "ok";
				socket.on('emailOk', function(data){
					if(data == "ok"){
						emailOk = "ok";
						console.log(userOk + emailOk);
						validate();
						function validate() {
							var input = document.createElement('input');
							input.type='email';
							input.value=submission.email;
							if (input.checkValidity()) {
								if(submission.password == submission.password1){
									if(submission.username != submission.password){
										alert("Success\nAccount created! Check your email to finish registration!");
									}
									else{
										alert("Error\nPassword can't be the same as username");
									}
								}
								else{
									alert("Error\nPlease confirm your password!");
								}
							} else {
								alert("Error\nEmail format not correct");
							}
							return false;
						}
					}
					else if(data == "nok"){
					//email already exists
					alert("Error\nEmail already exists! Try login in?");
					}
				});
			}
			else if (data == "nok"){
				//user already exists
				alert("Error\nPlease choose a different user name");
			}
			setTimeout("submitForm()", 1000);
        });
	}
</script>
</body>
</html>











